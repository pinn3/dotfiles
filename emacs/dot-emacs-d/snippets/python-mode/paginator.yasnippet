# -*- mode: snippet -*-
# name: paginator
# key: pag
# --

def ${1:paginator_name}(${2:required_arg}, after_cursor=None):
    ${3:# @todo: build initial query}
    if after_cursor:
        ${4:# @todo: apply after_cursor}

    res = ${5:# @todo: execute query}
    for item in res$7:
        yield item

    next_cursor = res$8
    if next_cursor:
        yield from $1($2, next_cursor)
